<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Text shadow</title>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <div id="main">
    <div id="sample-text">This is sample text</div>
    <div class="seper">
      <fieldset>
        <legend>Colors</legend>
        <div class="color">
          <label for="color1">background
            <input type="color" value="#CE006E" id="color1"></label>
        </div>
        <div class="color">
          <label for="color2">Text
            <input type="color" value="#FF84B0" id="color2"></label>
        </div>
        <div class="color">
          <label for="color3">Shadow
            <input type="color" value="#333333" id="color3"></label>
        </div>
      </fieldset>
      <fieldset>
        <legend>Shadow positions</legend>
        <div class="radios">
          <fieldset id="direction1">
            <legend>X</legend>
            <label for="left">left
              <input id="left" type="radio" value="-1" name="direction1" checked></label>
            <label for="right">right
              <input id="right" type="radio" value="1" name="direction1"></label>
            <label for="none1">none
              <input id="none1" type="radio" value="0" name="direction1"></label>
          </fieldset>
          <fieldset id="direction2">
            <legend>Y</legend>
            <label for="top">top
              <input id="top" type="radio" value="-1" name="direction2" checked></label>
            <label for="bottom">bottom
              <input id="bottom" type="radio" value="1" name="direction2"></label>
            <label for="none">none
              <input id="none" type="radio" value="0" name="direction2"></label>
          </fieldset>
        </div>
      </fieldset>
      <fieldset>
        <legend>Number of shadows</legend>
        <div class="input-group">
          <button class="button button--decrease" data-bind="decreaseQty">âˆ’</button>
          <label for="num">input</label>
          <input type="number" name="qty" id="num" class="input-value" value="10" min="0" max="99">
          <button class="button button--increase" data-bind="increaseQty">+</button>
        </div>
      </fieldset>
      <fieldset>
        <legend>Number of blurriness</legend>
        <div class="input-group">
          <button class="button button--decrease" data-bind="decreaseQty">âˆ’</button>
          <label for="blur">input</label>
          <input type="number" name="qty" id="blur" class="input-value" value="1" min="0" max="99">
          <button class="button button--increase" data-bind="increaseQty">+</button>
        </div>
      </fieldset>
      <button class="nudes button">Show me code</button>

      <div class="include">
        <label for="bgrnd">include background<input id="bgrnd" type="checkbox" checked></label>
        <label for="color">include text color <input id="color" type="checkbox" checked></label>
      </div>
    </div>
  </div>
  <div class="export hidden">
    <div class="inline">
      <label for="shadow-out" class="center">CSS</label>
      <input id="shadow-out" type="text"><button class="button" id="copy-text">ðŸ“‹ COPY</button>
    </div>
    <button class="nudes bottom button">Hide this</button>
  </div>
  <script>
    ;
    (function () {
      "use strict";
      const input = {
        value: 0,
        increase: function () {
          return this.value >= 0 && this.value < 99 && ++this.value || 0;
        },
        decraise: function () {
          return this.value <= 99 && this.value > 0 && --this.value || 0;
        }
      };
      document.addEventListener("click", load);

      //get sample text for changing text-shadow
      const S_TEXT = document.querySelector("#sample-text");
      const EXPORT = document.querySelector(".export");
      let color1 = document.querySelector("#color1");
      let color2 = document.querySelector("#color2");
      let color3 = document.querySelector("#color3");
      let shadowOut = document.querySelector("#shadow-out");
      S_TEXT.style.background = color1.value;
      S_TEXT.style.color = color2.value;

      function getNumberOfShadows() {
        return Number(document.querySelector("#num").value);
      }

      function getNumberOfBlur() {
        return Number(document.querySelector("#blur").value);
      }

      function copyText(element) {
        element.select();
        element.setSelectionRange(0, 99999);
        document.execCommand("copy");
      }

      function getCheckedValues() {
        return document.querySelectorAll("input:checked");
      }

      function toggleHide(elem) {
        elem.classList.toggle("hidden")
      }

      function makeTextString(count, blur) {
        let color = color3.value || "#000";
        let [horizontal, vertical] = [...getCheckedValues()];
        let tempH = Number(horizontal.value);
        let tempV = Number(vertical.value);
        let string = "";
        if (tempH === 0 && tempV === 0) return string = "";

        for (let i = 0; i < count; i++) {
          if (i) string += ",";
          string += stringMake(tempH, tempV, blur, color);
          if (tempH !== 0)(tempH > 0) ? ++tempH : --tempH;
          if (tempV !== 0)(tempV > 0) ? ++tempV : --tempV;
        }
        return string;
      }

      //make string of shadows
      function stringMake(f, s, t, c) {
        return `${f}px ${s}px ${t}px ${c}`;
      }

      function exported() {
        let string = "text-shadow: " + makeTextString(getNumberOfShadows(), getNumberOfBlur()) + ";"
        if (getCheckedValues()[2]) string += "background: " + color1.value + ";";
        if (getCheckedValues()[3]) string += "color: " + color2.value + ";";
        shadowOut.value = string;
      }

      document.addEventListener("change", () => {
        //add text-shadow to element
        S_TEXT.style.textShadow = makeTextString(getNumberOfShadows(), getNumberOfBlur())
      });

      color1.addEventListener("input", (e) => S_TEXT.style.background = e.target.value);
      color2.addEventListener("input", (e) => S_TEXT.style.color = e.target.value);
      document.querySelectorAll(".nudes").forEach((e) => e.addEventListener("click", () => {
        toggleHide(EXPORT);
        exported();
      }));
      document.getElementById("copy-text").addEventListener("click", () => {
        copyText(shadowOut);

      })
      
      function load(e) {
        const targ = e.target;
        if (targ.dataset.bind) {
          let svalue = targ.parentElement.getElementsByTagName("input")[0];
          input.value = svalue.value;
          if (targ.dataset.bind === "decreaseQty") {
            svalue.value = input.decraise();
          }
          if (targ.dataset.bind === "increaseQty") {
            svalue.value = input.increase();
          }
        }
        S_TEXT.style.textShadow = makeTextString(getNumberOfShadows(), getNumberOfBlur());
      }
      S_TEXT.style.textShadow = makeTextString(getNumberOfShadows(), getNumberOfBlur());
    })();
  </script>
</body>

</html>